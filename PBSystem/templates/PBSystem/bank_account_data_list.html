{% extends "PBSystem/base.html" %}

{% block content %}
	{% if user.is_authenticated %}
	<a href="{% url 'PBSystem:new_customer'%}" class="btn btn-primary">+ New Customer</a>
	<h2><a href="/">Cumtomer List</a></h2>
	{% for data in bankaccountdata_list %}
	<div class="table-responsive">
		<table class="table table-striped table-sm">
			<thead>
				<tr>
					<th>ID</th>
					<th>Customer Name</th>
					<th>Bank Account</th>
					<th>Date Registered</th>
					<th>Date</th>
					<th>Users</th><!--ユーザーの名前-->
					<th>CSV / PDF</th><!--CSVかPDF出力-->
					<th>Delete</th>
					<!-- IncompleteとCompleteは後で作る-->
					<th>Edit</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>{{ data.id }}</td>
					<td>{{ data.bank_accounts.customer.customer_name}}</td>
					<td>{{ data.bank_account}}</td>
					<td>{{ data.reg_date|date:"M d, Y" }}</td>
					<td>{{ data.date|date:"M d, Y"}}</td>
					<td></td>
					<td></td>
					<td><button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">Delete</button></td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
  			<div class="modal-content">
    			<div class="modal-header">
    				<h5 class="modal-title" id="exampleModalLabel">Deletion</h5>
    				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
    					<span aria-hidden="true">&times;</span>
    				</button>
    			</div>
    			<div class="modal-body">
    				Continue to delete?
    			</div>
    			<div class="modal-footer">
    				<button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
    				<a href="{% url 'PBSystem:bank_account_data_delete' data.id%}" class="btn btn-danger">Yes</a>
    			</div>
    		</div>
    	</div>
    </div>
    {% endfor %}
	{% else %}
		<h2>Please Log In</h2>
	{% endif %}
{% endblock %}